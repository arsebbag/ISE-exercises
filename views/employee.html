<!DOCTYPE html>
<html>
<head>
<title>Israeli Flowers Shop</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- <link rel="icon" href="/images/flower-shop32px.png" /> -->
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<style>
    .bs-example{
        margin: 20px;
    }
    body,h1,h2,h3,h4,h5,h6 {font-family: "Karma", sans-serif}
    .w3-bar-block .w3-bar-item {padding:20px}
</style>
</head>
<body>

<!-- Sidebar (hidden by default) -->
<nav class="w3-sidebar w3-bar-block w3-card w3-top w3-xlarge w3-animate-left" style="display:none;z-index:2;width:40%;min-width:300px" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()"
  class="w3-bar-item w3-button">Close Menu</a>
  <a href="#Catalog" onclick="w3_close()" class="w3-bar-item w3-button">Catalog</a>
  <a href="#ManageUsers" onclick="w3_close()" class="w3-bar-item w3-button">Manage users</a>
  <a href="#About" onclick="w3_close()" class="w3-bar-item w3-button">About</a>
  <a href="#MakeContact" onclick="w3_close()" class="w3-bar-item w3-button">Make Contact</a>
</nav>

<!-- Top menu -->
<div class="w3-top">
  <div class="w3-white w3-xlarge" style="max-width:1200px;margin:auto">
    <div class="w3-button w3-padding-16 w3-left" onclick="w3_open()">â˜°</div>
    <div class="w3-right w3-padding-16" id="Logout" onclick="logout()">Logout</div>
    <div class="w3-center w3-padding-16">
        Flower 
        <img src="/images/flower-shop32px.png"/>
        Shop
    </div>
  </div>
</div>

<hr id="Catalog"/>
<!-- !PAGE CONTENT! -->
<div class="w3-main w3-content w3-padding" style="max-width:1200px;margin-top:100px">

  <!-- First Photo Grid-->
  <div class="w3-row-padding w3-padding-16 w3-center" id="food">
    <div class="w3-quarter">
      <img src="/images/Agapanthus.jpg" alt="Agapanthus" style="width:100%">
      <h3>Agapanthus</h3>
      <p>In your face.</p>
    </div>
    <div class="w3-quarter">
      <img src="/images/Ageratum.jpg" alt="Ageratum" style="width:100%">
      <h3>Let Me Tell You About This Ageratum</h3>
      <p>Once again, is the most popular flower.</p>
    </div>
    <div class="w3-quarter">
      <img src="/images/Paeonia.jpg" alt="Paeonia" style="width:100%">
      <h3>Regular Paeonia, Beautiful is simple</h3>
      <p>Amazing flower to your wife.</p>
      <p>What else?</p>
    </div>
    <div class="w3-quarter">
      <img src="/images/PaeoniaCoralSunset.jpg" alt="Paeonia Coral Sunset" style="width:100%">
      <h3>Once Again, Paeonia Coral Sunset flower</h3>
      <p>Amazing, just amazing.</p>
    </div>
  </div>
  
  <!-- Second Photo Grid-->
  <div class="w3-row-padding w3-padding-16 w3-center">
    <div class="w3-quarter">
      <img src="/images/Zantedeschia aethiopica.jpg" alt="Popsicle" style="width:100%">
      <h3> Zantedeschia aethiopica</h3>
      <p>I need a cool flower.</p>
    </div>
    <div class="w3-quarter">
      <img src="/images/Iris.jpg" alt="Salmon" style="width:100%">
      <h3>Iris</h3>
      <p>Like Intel Iris GPU but working.</p>
    </div>
    <div class="w3-quarter">
      <img src="/images/Aster.jpg" alt="Aster" style="width:100%">
      <h3>Aster</h3>
      <p>Aster the queen.</p>
    </div>
    <div class="w3-quarter">
      <img src="/images/Aralia.jpg" alt="Croissant" style="width:100%">
      <h3>Aralia</h3>
      <p>I love you in French.</p>
    </div>
  </div>

  <hr id="ManageUsers">
  <br />
  <div id="users" class="w3-container w3-padding-32 w3-center">
    <h3>Manage your users</h3><br>
    <!-- a form to put a user 
    a form to remove user-->
    <div id="users">
    </div>
    <div id="addUser">
      <form>
          <h1>Add a user</h1>
          <label for="username" >Username</label>
          <input type="text" id="username"><br>
          <label for="password" >Password</label>
          <input type="password" id="password"><br>
          <label for="rule" >Rule</label>
          <input type="text" id="rule">
          <br>
          <input type="button" value="Add user" onclick="addUser()">
          <p>Please refresh if the new user does not appear in list</p>
        </form>
    </div>
    <br>
    <br>
    <br>
  </div>

<hr id="About">
<br>
<!-- About Section -->
<div class="w3-container w3-padding-32 w3-center">  
  <h3>About Us, The biggest flower shop</h3><br>
  <img src="/images/FlowerShop.jpg" alt="Our Shop" class="w3-image" style="display:block;margin:auto" width="800" height="533">
  <div class="w3-padding-32">
    <h4><b>Flowers are Just Love</b></h4>
    <h6><i>With Passion For Real, High Quality and Rare Flowers</i></h6>
  </div>
</div>

  <hr id="MakeContact">

  <!-- Make Contact Section -->
  <div class="w3-container w3-padding-32 w3-center">  
    <br>
    <div class="w3-padding-32">
        <p>Just the biggest company of flowers with an impressive collection of flowers available for all of you, spreading love and happiness</p>
        <p>Harav Norok 9, Rishon Lezion. Tel: 03-6002-7187</p>
    </div>
  </div>
  <hr id="ModalSection">
  <div class="bs-example">
    <div id="myModal" class="modal fade" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Login</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <label for="username">Username&nbsp;</label>
                    <input type="text" placeholder="Enter Username" id="username" required>
                </div>
                <div class="modal-body">
                  <label for="password">Password  &nbsp;</label>
                  <input type="text" placeholder="Enter Password" id="password" required>
                  
              </div>
                <div class="modal-footer">
                    <button type="button" id="submit" class="btn btn-primary" onclick="login()">Submit</button>
                    <button type="button" id="close_modal" class="btn btn-primary">Close Modal</button>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
// Script to open and close sidebar
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
}
 
function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
}

function logout() {
  location.replace('/index.html')
}

async function readyFn() {
  console.log("window loaded")
  let string = window.location.href.replace("login", "users")
  string = string.split('#')[0]
  let response = await fetch(string).then(
    (response) => {
      return response.json()
  })

  let json = await response;
  //console.log(json)
  let usersDOM = document.getElementById("users");
  let i = 0;
  let namesList = []
  let index = 0;
  let rulesList = []
  let ruleIndex = 0;
  let passwordsList = []
  let passwordsIndex = 0
  var obj = JSON.parse(json, function (key, value) {
   if (key == "username")
   {
     namesList[i] = value;
     ++i;
   }
   if (key == "rule")
   {
    rulesList[ruleIndex] = value;
     ++ruleIndex;
   }
   if (key == "password")
   {
    passwordsList[passwordsIndex] = value;
    ++passwordsIndex;
   }
  });

  for (let j = 0; j < i - 1; ++j)
  {
    let li = document.createElement("li");
    
    li.setAttribute('id', namesList[j]);
    li.appendChild(document.createTextNode("Name: " + namesList[j] + "  "));
    li.appendChild(document.createTextNode("Rule: " + rulesList[j] + "  "));
    usersDOM.appendChild(li);
  }
};

$( window ).on( "load", readyFn );


async function addUser()
{
  let username = document.getElementById("username").value
  let password = document.getElementById("password").value
  let rule = document.getElementById("rule").value

  
  if (username == null || password == null || rule == null)
  {
    return;
  }
  console.log("hii")
  let string = window.location.href.replace("login", "addUser")
  string = string.split('#')[0]
  string += "/" + rule
  string += "/" + password
  string += "/" + username

  console.log(string)
  let response = await fetch(string).then(
    (response) => {
      return response.json()
  })
  let json = await response;
  await readyFn();
}
</script>

</body>
</html>
