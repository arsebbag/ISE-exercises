<!DOCTYPE html>
<html>

  <head>
    <title>Israeli Flowers Shop</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="icon" href="/images/flower-shop32px.png" /> -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <style>
      .bs-example {
        margin: 20px;
      }

      body,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Karma", sans-serif
      }

      .w3-bar-block .w3-bar-item {
        padding: 20px
      }
    </style>
  </head>

  <body>

    <!-- Sidebar (hidden by default) -->
    <nav class="w3-sidebar w3-bar-block w3-card w3-top w3-xlarge w3-animate-left"
      style="display:none;z-index:2;width:40%;min-width:300px" id="mySidebar">
      <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button">Close Menu</a>
      <a href="#About" onclick="w3_close()" class="w3-bar-item w3-button">About</a>
      <a href="#MakeContact" onclick="w3_close()" class="w3-bar-item w3-button">Make Contact</a>
    </nav>


    <!-- Top menu -->
    <div class="w3-top">
      <div class="w3-white w3-xlarge" style="max-width:1200px;margin:auto">
        <div class="w3-button w3-padding-16 w3-left" onclick="w3_open()">â˜°</div>
        <div class="w3-right w3-padding-16" id="Login">Login</div>
        <div class="w3-center w3-padding-16">
          Flower
          <img src="/images/flower-shop32px.png" />
          Shop
        </div>
      </div>
    </div>

    <hr id="About">



    <div class="w3-container w3-padding-32 w3-center">
      <br>
      <br>
      <h3>About Us, The biggest flower shop</h3><br>
      <img src="/images/FlowerShop.jpg" alt="Our Shop" class="w3-image" style="display:block;margin:auto" width="800"
        height="533">
      <h4><b>Flowers are Just Love</b></h4>
      <h6><i>With Passion For Real, High Quality and Rare Flowers</i></h6>
    </div>

    <hr id="MakeContact">

    <div class="w3-container w3-padding-32 w3-center">
      <div class="w3-padding-32">
        <h1>Make Contact</h1>
        <p>Just the biggest company of flowers with an impressive collection of flowers available for all of you,
          spreading love and happiness</p>
        <p>Harav Norok 9, Rishon Lezion. Tel: 03-6002-7187</p>
      </div>
    </div>


    <hr id="ModalSection">
    <div class="bs-example">
      <div id="myModal" class="modal fade" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Login</h5>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <label for="username">Username&nbsp;</label>
              <input type="text" placeholder="Enter Username" id="username" required>
            </div>

            <div class="modal-body">
              <label for="password">Password &nbsp;</label>
              <input type="password" placeholder="Enter Password" id="password" required>
            </div>

            <div class="modal-footer">
              <button type="button" id="submit" class="btn btn-primary"
                onclick="login(document.getElementById('username').value,document.getElementById('password').value)">Submit</button>
              <button type="button" id="close_modal" class="btn btn-primary">Close Modal</button>
            </div>
            <div id="Error" style="display: none;color: red;">
              Username or Password are not correct
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- console.log(document.getElementById('password').value) -->

    <script>
      // Script to open and close sidebar
      function w3_open() {
        document.getElementById("mySidebar").style.display = "block";
      }

      function w3_close() {
        document.getElementById("mySidebar").style.display = "none";

      }

      async function login(username, password) {
        fetch('/auth', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ username, password }),
        })
          .then(response => {
            let temp = response.json().then((json) => {
              let htmlFile = json.html
              console.log(htmlFile)
              document.open();
              document.write(htmlFile);
              document.close();
            })
          })
          .catch((error) => {
            console.error('Error:', error);
          });
      }

      // async function login() {
      //   var user = {}

      //   let username = document.getElementById('username').value;
      //   let password = document.getElementById('password').value;
      //   //console.log(username)
      //   user["username"] = username;
      //   user["password"] = password;
      //   let response = await fetch('/login/' + username + "/" + password).then(
      //     (response) => {
      //       if (response.status != 404) {
      //         location.replace('/login/' + username + "/" + password);
      //       }
      //       else {
      //         document.getElementById("Error").style.display = "block";
      //       }
      //     }
      //   )

      // }

      $(document).ready(function () {

        $("#close_modal").click(function () {
          $("#myModal").modal('hide');

        });

        $("#Login").click(function () {
          document.getElementById("Error").style.display = "none";
          $("#myModal").modal('show');
        });
      });
    </script>

  </body>

</html>